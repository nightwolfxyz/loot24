Скрипт очистки сообщества ВК от "собак" (заблокированные и удаленные пользователи) и неактивных пользователей, которых давно не было в социальной сети.

Состав:

delete_dogs.py - скрипт удаления из сообщества "собак" - заблокированных (banned) и удаленных (deleted) пользователей. Удаляет пользователей, аккаунт которых заблокирован (banned), например за нарушение правил сайта, пользователей, аккаунт которых заморожен (frozen), например если на нем обнаружена подозрительная активность, а также если профиль пользователя удален (deleted). Сделать так, чтобы замороженные аккаунты не удалялись на данный момент не представляется возможным, между заблокированными (banned) и замороженными (frozen) аккаунтами на данный момент различия нет.

delete_inactive.py - скрипт, включающий в себя функционал скрипта delete_dogs.py по удалению из сообщества "собак" и плюс добавляет возможность обнаружения и удаления из сообщества пользователдей, которые давно не были в социальной сети, которых можно считать ушедшими, неактивными и удалять.

Пререквизиты:

- Требуется, чтобы был установлен python (проверялось на версии python 3.7 с сайта python.org) и расширение requests:

> pip install requests

Подготовка к работе:

- Переименовать или скопировать файл delete_dogs.original.conf в файл delete_dogs.conf и файл delete_inactive.original.conf в файл delete_inactive.conf

- Получить ключ доступа для VK API для ползователя (user access token).

На текущий момент (22.11.2025) работает следующий способ получения пользовательского ключа доступа (user access token) для VK API:

- Вставить в адресную строку браузера следующую строку:
https://oauth.vk.com/authorize?client_id=51785735&redirect_uri=https://oauth.vk.com/blank.html&display=mobile&scope=friends,groups,offline&response_type=token&v=5.131

- Авторизоваться в VK: по VK ID и/или ввести логин и пароль пользователя, под которым вы хотите продолжить работу

- Предоставить приложению InviteFriendStandalone необходимые запрашиваемые разрешения - обычно происходит автоматически с авторизацией

- В результате произойдет перенаправление на страницу https://oauth.vk.com/blank.html, а строка браузера примет вид:
https://oauth.vk.com/blank.html#access_token=ВАШ_ТОКЕН&expires_in=0&user_id=12345678
Ключ доступа (access_token) находится после параметра "access_token=..." и до начала следующего параметра, то есть до следующего знака амперсанда ("&").

- Ключ доступа (access token) необходимо скопировать из этой строки и вставить в поле USER_ACCESS_TOKEN конфигурационного файла с расширением ".conf".

Далее необходимо:

- Указать в конфигурационных файлах с расширением ".conf" свой USER_ID пользователя, которому выданы ключи доступа к VK API и под которым вы будете работать со скриптами - обычно это тот пользователь, под которым вы заходите ВКонтакте. Узнать свой USER_ID можно в настройках профиля, он имеет вид "id1234567", вводить только цифры, без префикса "id".

- Указать в конфигурационных файлах с расширением ".conf" COMMUNITY_ID сообщества, с которым вы будете работать и которое вы будете чистить от неактива. COMMUNITY_ID - числовой идентификатор сообщества вида "club1234567", вводить без префикса "club", узнать можно в разделе Управление сообществом -> Основная информация -> Адрес -> Номер сообщества.

- Указать в конфигурационных файлах с расширением ".conf" период неактивности пользователя при превышении которого он считается ушедшим и удаляется - INACTIVE_PERIOD. Значение периода задается в секундах. Для примера в конфигурационном файле delete_inactive.conf приведены константы соответствующие периодам 180, 90, 60 и 30 дней (180_DAYS_IN_SECONDS, 90_DAYS_IN_SECONDS", 60_DAYS_IN_SECONDS и 30_DAYS_IN_SECONDS соответственно).

Запуск скриптов (из командной строки):

> python delete_dogs.py

> python delete_inactive.py

